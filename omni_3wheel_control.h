/* 
 * File:   omni_3wheel_control.h
 * Author: 0_hayate
 *
 * Created on January 24, 2024, 4:44 PM
 */

#ifndef OMNI_3WHEEL_CONTROL_H
#define	OMNI_3WHEEL_CONTROL_H

/*
????????????????????????URL??
"https://qiita.com/hayate2718/items/9f5db2bfb46d39a7b330"
*/

/*
MCU?????????????????????????????????
32bitsMCU????????????????????...
*/

#define PI 3.141592f //??????
#define sqrt_3 1.732051f //3^(0.5)???

class omni_3wheel_control
{
private:

	float sin_theta_1; //???????????????????x????????x,y???????
	float cos_theta_1;

	float sin_theta_2;
	float cos_theta_2;

	float sin_theta_3;
	float cos_theta_3;
	
	float wheel_1; //????
	float wheel_2;
	float wheel_3;

	float wheel_1_velocity; //?????????????(???????)[m/s]
	float wheel_2_velocity;
	float wheel_3_velocity;


	float local_velocity_x; //????????????[m/s]
	float local_velocity_y;

	float global_velocity_x; //?????????????[m/s]
	float global_velocity_y;

	float robot_angle; //????????????????????

	float robot_range; //???????????????[m]
	float robot_angular_velocity; //??????????[rad/s]
	float robot_angular_wheel; //????????????????[m/s]

public:

	omni_3wheel_control();

	void local_control(float local_velocity_x, float local_velocity_y); //????????????

	void global_control(float global_velocity_x,float global_velocity_y); //?????????????

	void angular_velocity_control(float robot_angular_velocity);

	float get_wheel_velocity_1(); //??????????????

	float get_wheel_velocity_2();

	float get_wheel_velocity_3();

	void set_sin_theta_1(float theta);
	void set_cos_theta_1(float theta);

	void set_sin_theta_2(float theta);
	void set_cos_theta_2(float theta);
	
	void set_sin_theta_3(float theta);
	void set_cos_theta_3(float theta);

	void set_robot_range(float range);

	void set_robot_angle(float angle); //?????????????????????????[rad]

	float get_robot_angle(); //?????????????????????????[rad]

};


#endif	/* OMNI_3WHEEL_CONTROL_H */

